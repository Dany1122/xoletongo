{% extends "base.html" %}
{% load static %}

{% block titulo %}
   {{ servicio.titulo }}
{% endblock %}

{% block content %}
<!-- bradcam_area_start -->
<div class="bradcam_area" style="background-image: url('{{ servicio.imagen_principal.url }}'); background-size: cover; background-position: center;">
    <div class="overlay"></div>
    <h3>{{ servicio.titulo }}</h3>
</div>
    <!-- bradcam_area_end -->
<section class="service-details-area section-top-border">
    <div class="container box_1170">
        <h3 class="mb-30">{{ servicio.titulo }}</h3>
        <div class="row">
            <div class="col-md-6">
                <img src="{{ servicio.imagen_principal.url }}" alt="{{ servicio.titulo }}" class="img-fluid">
            </div>
            <div class="col-md-6">
                <p>{{ servicio.descripcion }}</p>
                <h4 class="mt-20">Costo por adulto</h4>
                <p><strong>${{ servicio.costo_por_persona }}</strong></p>
                <h4 class="mt-20">Costo por niño</h4>
                <p><strong>${{ servicio.costo_niño }}</strong></p>
                <h4 class="mt-20">Costo con descuento</h4>
                <p><strong>${{ servicio.costo_con_descuento }}</strong></p>
                
                {% if servicio.restricciones %}
                <p><strong>Restricciones:</strong> {{ servicio.restricciones }}</p>
                {% endif %}
                
                {# Mostrar atributos personalizados de forma orgánica #}
                {% if servicio.atributos_personalizados %}
                    {% for nombre, valor in servicio.atributos_personalizados.items %}
                        {% if valor %}  {# Solo mostrar si tiene valor #}
                            <div class="mt-3">
                                <h4>{{ nombre }}</h4>
                                <p>
                                    {% if valor == True %}
                                        <i class="fa fa-check-circle text-success"></i> Sí
                                    {% elif valor == False %}
                                        <i class="fa fa-times-circle text-danger"></i> No
                                    {% else %}
                                        <strong>{{ valor }}</strong>
                                    {% endif %}
                                </p>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                
                <div class="mt-4 mb-4">
                    <a href="{% url 'crear_reservacion' servicio.id %}" class="btn-reserva" style="display: inline-block; text-decoration: none;">
                        <i class="fa fa-calendar-check-o mr-2"></i> Reservar ahora
                    </a>
                </div>
            </div>
        </div>
       
        <div class="section-top-border">
            <h3 class="mb-30">Galería</h3>
            <div class="row gallery-item">
                {% for img in servicio.imagenes.all %}
                <div class="col-md-4">
                    <a href="{{ img.imagen.url }}" class="img-pop-up" title="{{ img.descripcion|default:servicio.titulo }}">
                    <div class="single-gallery-image" style="background-image: url('{{ img.imagen.url }}');"></div>
                    </a>
                    {% if img.descripcion %}
                    <small class="text-muted d-block mt-2">{{ img.descripcion }}</small>
                    {% endif %}
                </div>
                {% empty %}
                <div class="col-12"><em>No hay imágenes en la galería.</em></div>
                {% endfor %}
            </div>
        </div>

        <!-- Sección de Reseñas -->
        {% include 'resenas_partial.html' with object=servicio content_type=content_type tipo_objeto="servicio" %}
    </div>
</section>
{% endblock %}